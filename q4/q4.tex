\documentclass[../main.tex]{subfiles}
\usepackage{mainpreamble}

\begin{document}

\subsection{Dithering}
\subsubsection{Arquivo principal}
\begin{minipage}{\linewidth}
    \lstinputlisting[language=MATLAB]{q4.m}
\end{minipage}

\end{document}